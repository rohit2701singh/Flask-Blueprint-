{% extends 'base.html'%}

{% block style %}
<link href="{{ url_for('static', filename='css/posts.css') }}" rel="stylesheet" />
{% endblock style %}

{% block content %}

<div class="container mt-5">
	<div class="col-md-10 mx-auto">

		<!-- Header Section -->
		<div class="p-3 rounded d-flex align-items-center shadow-sm" style="background-color: #f8f9fa;">
			<!-- Profile Image -->
			<img src="{{ url_for('static', filename='profile_pics/' + post.author.image_file) }}" alt="User Image"
				class="rounded-circle" style="width: 60px; height: 60px; object-fit: cover;">

			<!-- Title, Author & Actions -->
			<div class="ml-3 w-100">
				<div class="d-flex flex-column flex-md-row justify-content-between align-items-md-center">
					<h3 class="mb-2 mb-md-0">{{ post.title }}</h3>

					{% if current_user == post.author %}
					<div class="d-flex flex-column flex-md-row">
						<a href="{{ url_for('posts.update_post', post_id=post.id) }}"
							class="text-info mb-2 mb-md-0 mr-md-3">
							<i class="fa fa-edit"></i> Edit
						</a>
						<a href="#" class="text-danger" data-toggle="modal" data-target="#deleteModal">
							<i class="fa fa-trash"></i> Delete
						</a>
					</div>
					{% endif %}
				</div>
				<p class="mb-0 text-muted">
					By
					<a href="{{ url_for('users.user_posts', username=post.author.username) }}">
						{{ post.author.username }}
					</a>
					â€¢ {{ post.date_posted.strftime('%a, %d %b %Y') }}
				</p>
			</div>
		</div>

		<!-- Post Content -->
		<div class="card mt-4 shadow-sm">
			<div class="card-body">
				{{ post.content|safe }}
			</div>
		</div>
	</div>
</div>

<!-- Delete Modal -->
<div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel"
	aria-hidden="true">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="deleteModalLabel">Delete Post?</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>

			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
				<form action="{{ url_for('posts.delete_post', post_id=post.id) }}" method="POST" class="ml-2">
					<input type="submit" value="Delete" class="btn btn-danger">
				</form>
			</div>
		</div>
	</div>
</div>

{% endblock content %}