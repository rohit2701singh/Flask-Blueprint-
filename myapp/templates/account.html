{% extends 'base.html' %}

{% block style %}
    <style>
        .profile-card {
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border-radius: 10px;
        }
        .profile-card img {
            border: 4px solid #f0f0f0;
        }
        .btn-custom {
            transition: 0.3s;
        }
        .btn-custom:hover {
            transform: scale(1.05);
        }
    </style>
{% endblock %}

{% block content %}
<div class="container mt-5">
    <section class="py-4" style="background-color: #f8f9fa; border-radius: 10px;">
        <div class="container px-4">

            <!-- Breadcrumb -->
            <nav aria-label="breadcrumb" class="bg-white rounded p-3 mb-4 shadow-sm">
                <ol class="breadcrumb mb-0">
                    <li class="breadcrumb-item active"><b>Account Information</b></li>
                </ol>
            </nav>

            <div class="row">
                <!-- Profile Card -->
                <div class="col-lg-4">
                    <div class="card profile-card mb-4 p-3 text-center">
                        <img src="{{ image_file }}" alt="avatar" class="rounded-circle img-fluid mx-auto"
                             style="width: 160px; height: 160px; object-fit: cover;">
                        <h5 class="mt-3">{{ current_user.username }}</h5>
                        <p class="text-muted">{{ current_user.email }}</p>

                        <a href="{{ url_for('users.user_posts', username=current_user.username) }}" 
                           class="btn btn-outline-success btn-sm btn-custom mb-3">
                           <i class="fa fa-file-text-o mr-1"></i> My Posts
                        </a>

                        <form method="POST" action="{{ url_for('users.remove_profile_image') }}">
                            {{ form.hidden_tag() }}
                            {{ form.remove_img(class="btn btn-outline-danger btn-sm btn-custom") }}
                        </form>
                    </div>
                </div>

                <!-- Account Edit Form -->
                <div class="col-lg-8">
                    <div class="card mb-4 shadow-sm">
                        <div class="card-body">

                            <form method="POST" enctype="multipart/form-data" novalidate>
                                {{ form.hidden_tag() }}

                                <div class="form-group row">
                                    <label class="col-sm-3 col-form-label">{{ form.username.label }}</label>
                                    <div class="col-sm-9">
                                        {{ form.username(class="form-control") }}
                                        {% for error in form.username.errors %}
                                            <small class="text-danger">*{{ error }}</small>
                                        {% endfor %}
                                    </div>
                                </div>

                                <div class="form-group row">
                                    <label class="col-sm-3 col-form-label">{{ form.email.label }}</label>
                                    <div class="col-sm-9">
                                        {{ form.email(class="form-control") }}
                                        {% for error in form.email.errors %}
                                            <small class="text-danger">*{{ error }}</small>
                                        {% endfor %}
                                    </div>
                                </div>

                                <div class="form-group row">
                                    <label class="col-sm-3 col-form-label">{{ form.picture.label }}</label>
                                    <div class="col-sm-9">
                                        {{ form.picture(class="form-control-file") }}
                                        {% for error in form.picture.errors %}
                                            <small class="text-danger">*{{ error }}</small>
                                        {% endfor %}
                                    </div>
                                </div>

                                <div class="text-center">
                                    {{ form.submit(class="btn btn-primary px-4 btn-custom") }}
                                </div>

                            </form>

                        </div>
                    </div>
                </div>

            </div>
        </div>
    </section>
</div>
{% endblock %}
